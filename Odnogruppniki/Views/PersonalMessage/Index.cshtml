
@{
    ViewBag.Title = "Мои сообщения";
}
@{ 
    var messages = ViewBag.Messages;
}

<script>
    function openMessage(id) {
        window.location = '@Url.Action("OpenMessage","PersonalMessage")' + '?id=' + id;
    }
    function openMessages(par) {
        window.location = '@Url.Action("OpenMessages","PersonalMessage")' + '?par=' + par;
    }
</script>

<div style="width:80%; margin-left:10%; margin-right:10%; padding-top:5%; margin-bottom:2%">
    <button type="button" style="background-color:steelblue; border-radius:20px; width:40px">
        <span class="glyphicon glyphicon-arrow-up" onclick="openMessages(1)"></span>
    </button>
    <button type="button" style="background-color:steelblue; border-radius:20px; width:40px">
        <span class="glyphicon glyphicon-arrow-down" onclick="openMessages(2)"></span>
    </button>
</div>

<div class="center-block" style="width:80%">
    @{
        if (messages.Count == 0)
        {
            <div>
                <h2>У вас нет сообщений</h2>
            </div>
        }
        else
        {
            foreach (var message in messages)
            {
                <div style="display:block; background-color:gainsboro; border-radius:6px; height:100px" onclick="openMessage(@message.id)">
                    <div class="pull-left col-sm-5" style="margin-right:35px; width:10%; height:inherit; font-size:inherit; padding-top:30px">
                        <b>@message.name_out</b>
                    </div>
                    <div class="col-sm-10" style="width:inherit; font-size:inherit; height:inherit; padding-top:15px">
                        @if(message.message.Length > 50)
                        {
                            message.message = message.message.Substring(0, 50) + "...";
                        }
                         @message.message
                    </div>
                    <div class="pull-right" style="margin-left:3%; margin-right:5%; width:5%; height:inherit">
                        @message.dateString
                    </div>
                </div>
                <br />
            }
            <br />
        }
    }
</div>

